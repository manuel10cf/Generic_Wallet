var blocktrail = require('./main');

var client = blocktrail.BlocktrailSDK({
  apiKey : process.env.BLOCKTRAIL_SDK_APIKEY,
  apiSecret : process.env.BLOCKTRAIL_SDK_APISECRET,
  testnet : true
});

var firstPassphrase = 'alakvnjaksdfjakskbfasdhjfbasdfalsdfkasjbdfmnabasdufiuwebfasafndmbaxcnasxlabgfngbdsbgksfjgb';
var passphrase = 'z0z0z0z0z0z0z0z0z0z0zhdhdhdhdhdhdhd7277272727272afaaaaaaaaaaaaaa';

var opt = {
  identifier: "test-v3-testdeferred",
  passphrase: firstPassphrase
};

var didCreate = false;
var didPwChange = false;

client
  .createNewWallet(opt)
  .then(function(wallet) {
    console.log('created wallet');
    didCreate = true;

    client
      .initWallet(opt)
      .then(function (wallet) {
        console.log('initialize wallet');
        wallet
          .passwordChange(passphrase)
          .then(function () {
            didPwChange = true;
          })
      });

  }, function (note) {
    console.log(note);
  })
  .then (function () {

  });